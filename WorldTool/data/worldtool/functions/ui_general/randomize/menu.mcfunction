# Called by worldtool:ui_general/page1.display
# Displays the randomization menu

function worldtool:ui/clear_chat
function worldtool:ui_general/back_button
tag @s add wt.menu.randomize

scoreboard players operation #ID_temp worldtool = @s wt.ID

scoreboard players set #temp worldtool 0
execute as @e[type=minecraft:marker,tag=worldtool,tag=wt.randomization_source] if score @s wt.ID = #ID_temp worldtool run scoreboard players add #temp worldtool 1
execute if score #temp worldtool matches 0 as @e[type=minecraft:marker,tag=worldtool,tag=wt.randomization_source_corner] if score @s wt.ID = #ID_temp worldtool run kill @s

scoreboard players set #temp2 worldtool 0
execute if entity @s[tag=wt.outline_selection] as @e[type=minecraft:marker,tag=worldtool,tag=wt.randomization_source_corner] run scoreboard players add #temp2 worldtool 1
execute if score #temp2 worldtool matches 2.. if entity @s[tag=wt.outline_selection] run tag @s add wt.particles

execute if predicate worldtool:tools/general/sourcepos run function worldtool:ui/sound.change_item
execute if predicate worldtool:tools/general/sourcepos run item modify entity @s weapon.mainhand worldtool:general_tool/pos1

execute if score #temp worldtool matches 0 if entity @s[tag=!wt.menu.randomize.replace] run tellraw @s ["",{"nbt":"Translation.\"button.randomize.run.name\"","storage": "worldtool:storage","color": "gray","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.randomize.run.disabled.description\"","storage": "worldtool:storage"}}}," ",{"nbt":"Translation.\"button.randomize.select_source.name\"","storage": "worldtool:storage","color": "light_purple","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.randomize.select_source.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_general/randomize/set_source/pos1"}}," ",{"nbt":"Translation.\"button.randomize.replace.off\"","storage": "worldtool:storage","color": "gold","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.randomize.replace.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_general/randomize/replace_on"}}]
execute if score #temp worldtool matches 1.. if entity @s[tag=!wt.menu.randomize.replace] run tellraw @s ["",{"nbt":"Translation.\"button.randomize.run.name\"","storage": "worldtool:storage","color": "yellow","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.randomize.run.enabled.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_general/randomize/start"}}," ",{"nbt":"Translation.\"button.randomize.select_source.name\"","storage": "worldtool:storage","color": "light_purple","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.randomize.select_source.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_general/randomize/set_source/pos1"}}," ",{"nbt":"Translation.\"button.randomize.replace.off\"","storage": "worldtool:storage","color": "gold","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.randomize.replace.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_general/randomize/replace_on"}}]
execute if score #temp worldtool matches 0 if entity @s[tag=wt.menu.randomize.replace] run tellraw @s ["",{"nbt":"Translation.\"button.randomize.run.name\"","storage": "worldtool:storage","color": "gray","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.randomize.run.disabled.description\"","storage": "worldtool:storage"}}}," ",{"nbt":"Translation.\"button.randomize.select_source.name\"","storage": "worldtool:storage","color": "light_purple","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.randomize.select_source.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_general/randomize/set_source/pos1"}}," ",{"nbt":"Translation.\"button.randomize.replace.on\"","storage": "worldtool:storage","color": "gold","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.randomize.replace.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_general/randomize/load"}}]
execute if score #temp worldtool matches 1.. if entity @s[tag=wt.menu.randomize.replace] run tellraw @s ["",{"nbt":"Translation.\"button.randomize.run.name\"","storage": "worldtool:storage","color": "yellow","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.randomize.run.enabled.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_general/randomize/start"}}," ",{"nbt":"Translation.\"button.randomize.select_source.name\"","storage": "worldtool:storage","color": "light_purple","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.randomize.select_source.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_general/randomize/set_source/pos1"}}," ",{"nbt":"Translation.\"button.randomize.replace.on\"","storage": "worldtool:storage","color": "gold","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.randomize.replace.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_general/randomize/load"}}]

function worldtool:ui/close_button

function worldtool:ui/anti_feedback_chat_message/load
