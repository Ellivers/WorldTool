# Called manually and by worldtool:technical/cmd/log/change/*
# Lists log entries

function worldtool:ui/clear_chat

function #rx.playerdb:api/v2/get
execute store success score #temp worldtool if data storage rx.playerdb:io player.data.WorldTool.LogView
execute if score #temp worldtool matches 0 run data modify storage rx.playerdb:io player.data.WorldTool.LogView set value {info:1b,warning:1b,error:1b}
execute if score #temp worldtool matches 0 run function #rx.playerdb:api/v2/save

tellraw @s [{"nbt":"Translation.\"info.log_title\"","storage": "worldtool:storage","color": "gold"},"\n"]

scoreboard players set #temp worldtool 0
scoreboard players set #temp2 worldtool 0
execute store result score #currentTime worldtool run time query gametime
execute store result score #temp2 worldtool run data get storage worldtool:storage Log
execute if score #temp2 worldtool matches 1.. run function worldtool:technical/cmd/log/loop/main
execute if score #temp2 worldtool matches 0 run tellraw @s {"nbt":"Translation.\"info.log_empty\"","storage": "worldtool:storage","italic": true}

tellraw @s ""
execute if data storage rx.playerdb:io player.data.WorldTool.LogView{error:1b,warning:1b,info:1b} run tellraw @s [{"nbt":"Translation.\"label.log_view\"","storage": "worldtool:storage"},{"nbt":"Translation.\"button.log_view.error.on\"","storage": "worldtool:storage","color": "red","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/error"}}," ",{"nbt":"Translation.\"button.log_view.warning.on\"","storage": "worldtool:storage","color": "gold","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/warning"}}," ",{"nbt":"Translation.\"button.log_view.info.on\"","storage": "worldtool:storage","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/info"}}]
execute if data storage rx.playerdb:io player.data.WorldTool.LogView{error:0b,warning:0b,info:1b} run tellraw @s [{"nbt":"Translation.\"label.log_view\"","storage": "worldtool:storage"},{"nbt":"Translation.\"button.log_view.error.off\"","storage": "worldtool:storage","color": "#872b2b","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/error"}}," ",{"nbt":"Translation.\"button.log_view.warning.off\"","storage": "worldtool:storage","color": "#755b26","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/warning"}}," ",{"nbt":"Translation.\"button.log_view.info.on\"","storage": "worldtool:storage","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/info"}}]
execute if data storage rx.playerdb:io player.data.WorldTool.LogView{error:0b,warning:1b,info:0b} run tellraw @s [{"nbt":"Translation.\"label.log_view\"","storage": "worldtool:storage"},{"nbt":"Translation.\"button.log_view.error.off\"","storage": "worldtool:storage","color": "#872b2b","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/error"}}," ",{"nbt":"Translation.\"button.log_view.warning.on\"","storage": "worldtool:storage","color": "gold","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/warning"}}," ",{"nbt":"Translation.\"button.log_view.info.off\"","color": "#bfbfbf","storage": "worldtool:storage","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/info"}}]
execute if data storage rx.playerdb:io player.data.WorldTool.LogView{error:1b,warning:0b,info:0b} run tellraw @s [{"nbt":"Translation.\"label.log_view\"","storage": "worldtool:storage"},{"nbt":"Translation.\"button.log_view.error.on\"","storage": "worldtool:storage","color": "red","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/error"}}," ",{"nbt":"Translation.\"button.log_view.warning.off\"","storage": "worldtool:storage","color": "#755b26","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/warning"}}," ",{"nbt":"Translation.\"button.log_view.info.off\"","color": "#bfbfbf","storage": "worldtool:storage","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/info"}}]
execute if data storage rx.playerdb:io player.data.WorldTool.LogView{error:0b,warning:1b,info:1b} run tellraw @s [{"nbt":"Translation.\"label.log_view\"","storage": "worldtool:storage"},{"nbt":"Translation.\"button.log_view.error.off\"","storage": "worldtool:storage","color": "#872b2b","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/error"}}," ",{"nbt":"Translation.\"button.log_view.warning.on\"","storage": "worldtool:storage","color": "gold","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/warning"}}," ",{"nbt":"Translation.\"button.log_view.info.on\"","storage": "worldtool:storage","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/info"}}]
execute if data storage rx.playerdb:io player.data.WorldTool.LogView{error:1b,warning:1b,info:0b} run tellraw @s [{"nbt":"Translation.\"label.log_view\"","storage": "worldtool:storage"},{"nbt":"Translation.\"button.log_view.error.on\"","storage": "worldtool:storage","color": "red","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/error"}}," ",{"nbt":"Translation.\"button.log_view.warning.on\"","storage": "worldtool:storage","color": "gold","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/warning"}}," ",{"nbt":"Translation.\"button.log_view.info.off\"","color": "#bfbfbf","storage": "worldtool:storage","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/info"}}]
execute if data storage rx.playerdb:io player.data.WorldTool.LogView{error:1b,warning:0b,info:1b} run tellraw @s [{"nbt":"Translation.\"label.log_view\"","storage": "worldtool:storage"},{"nbt":"Translation.\"button.log_view.error.on\"","storage": "worldtool:storage","color": "red","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/error"}}," ",{"nbt":"Translation.\"button.log_view.warning.off\"","storage": "worldtool:storage","color": "#755b26","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/warning"}}," ",{"nbt":"Translation.\"button.log_view.info.on\"","storage": "worldtool:storage","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/info"}}]
execute if data storage rx.playerdb:io player.data.WorldTool.LogView{error:0b,warning:0b,info:0b} run tellraw @s [{"nbt":"Translation.\"label.log_view\"","storage": "worldtool:storage"},{"nbt":"Translation.\"button.log_view.error.off\"","storage": "worldtool:storage","color": "#872b2b","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/error"}}," ",{"nbt":"Translation.\"button.log_view.warning.off\"","storage": "worldtool:storage","color": "#755b26","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/warning"}}," ",{"nbt":"Translation.\"button.log_view.info.off\"","color": "#bfbfbf","storage": "worldtool:storage","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.log_view.toggle.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:technical/cmd/log/change/info"}}]

function worldtool:ui/anti_feedback_chat_message/load
