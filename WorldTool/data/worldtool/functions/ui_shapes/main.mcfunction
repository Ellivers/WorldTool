# Called by worldtool:drop_tool/tools/shapes and various other functions
# The main menu for the shape generation tool

scoreboard players operation #ID_temp worldtool = @s wt.ID
execute as @e[type=minecraft:marker,tag=worldtool,tag=wt.shape_position] if score @s wt.ID = #ID_temp worldtool run tag @s add wt.temp

function worldtool:ui_shapes/remove_tags

function worldtool:ui/open_tool

execute unless score @s wt.diameter matches 3..999 run scoreboard players set @s wt.diameter 3
execute unless score @s wt.precision matches 10..300 run scoreboard players set @s wt.precision 100
execute unless score @s wt.degrees matches 1..360 run scoreboard players set @s wt.degrees 360
execute unless score @s wt.rotY matches 0..359 run scoreboard players set @s wt.rotY 0
execute unless score @s wt.rotX matches 0..359 run scoreboard players set @s wt.rotX 0
execute unless score @s wt.length matches 1.. run scoreboard players set @s wt.length 1

execute if predicate worldtool:shape_tool/shapes/circle run function worldtool:ui_shapes/select_shape/circle/convert_orientation

execute if predicate worldtool:shape_tool/shapes/circle run tag @s add wt.shape.circle
execute if predicate worldtool:shape_tool/shapes/cone run tag @s add wt.shape.cone
execute if predicate worldtool:shape_tool/shapes/cylinder run tag @s add wt.shape.cylinder
execute if predicate worldtool:shape_tool/shapes/sphere run tag @s add wt.shape.sphere

tag @s add wt.setting.diameter
tag @s add wt.setting.precision
tag @s[predicate=worldtool:shape_tool/settings/orientations/down] add wt.setting.orientation.down
tag @s[predicate=worldtool:shape_tool/settings/orientations/up] add wt.setting.orientation.up
tag @s[predicate=worldtool:shape_tool/settings/orientations/south] add wt.setting.orientation.south
tag @s[predicate=worldtool:shape_tool/settings/orientations/north] add wt.setting.orientation.north
tag @s[predicate=worldtool:shape_tool/settings/orientations/west] add wt.setting.orientation.west
tag @s[predicate=worldtool:shape_tool/settings/orientations/east] add wt.setting.orientation.east
tag @s add wt.setting.degrees
execute unless entity @s[tag=!wt.shape.cone,tag=!wt.shape.cylinder] run tag @s add wt.setting.length
tag @s add wt.setting.y_rotation
execute unless entity @s[tag=!wt.setting.orientation.north,tag=!wt.setting.orientation.south] run tag @s[tag=!wt.shape.sphere] add wt.setting.z_rotation
execute unless entity @s[tag=!wt.setting.orientation.east,tag=!wt.setting.orientation.west,tag=!wt.shape.sphere] run tag @s add wt.setting.x_rotation
tag @s add wt.setting.hollow
tag @s add wt.setting.keep
tag @s add wt.setting.continuous
function #worldtool:addon/ui_shapes/main/add_tags

execute if entity @s[tag=wt.shape.circle] run tellraw @s [{"nbt":"Translation.\"info.selected_shape.circle\"","storage": "worldtool:storage","color": "yellow"}," ",{"nbt":"Translation.\"button.change_shape.name\"","storage": "worldtool:storage","color": "green","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.change_shape.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/select_shape/select"}}]
execute if entity @s[tag=wt.shape.cone] run tellraw @s [{"nbt":"Translation.\"info.selected_shape.cone\"","storage": "worldtool:storage","color": "yellow"}," ",{"nbt":"Translation.\"button.change_shape.name\"","storage": "worldtool:storage","color": "green","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.change_shape.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/select_shape/select"}}]
execute if entity @s[tag=wt.shape.cylinder] run tellraw @s [{"nbt":"Translation.\"info.selected_shape.cylinder\"","storage": "worldtool:storage","color": "yellow"}," ",{"nbt":"Translation.\"button.change_shape.name\"","storage": "worldtool:storage","color": "green","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.change_shape.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/select_shape/select"}}]
execute if entity @s[tag=wt.shape.sphere] run tellraw @s [{"nbt":"Translation.\"info.selected_shape.sphere\"","storage": "worldtool:storage","color": "yellow"}," ",{"nbt":"Translation.\"button.change_shape.name\"","storage": "worldtool:storage","color": "green","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.change_shape.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/select_shape/select"}}]
function #worldtool:addon/ui_shapes/main/display_shape

execute if entity @s[tag=wt.setting.diameter] run tellraw @s ["",{"nbt":"Translation.\"label.shapes.diameter.name\"","storage": "worldtool:storage","color": "yellow","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"label.shapes.diameter.description\"","storage": "worldtool:storage"}}},{"nbt":"button.left.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.decrease.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/diameter_decrease"}},{"score":{"name": "@s","objective": "wt.diameter"}},{"nbt":"button.right.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.increase.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/diameter_increase"}}," ",{"nbt":"Translation.\"button.reset.name\"","storage": "worldtool:storage","color": "dark_purple","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.reset.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/diameter_reset"}}]
execute if entity @s[tag=wt.setting.precision] run tellraw @s ["",{"nbt":"Translation.\"label.shapes.precision.name\"","storage": "worldtool:storage","color": "gold","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"label.shapes.precision.description\"","storage": "worldtool:storage"}}},{"nbt":"Translation.\"button.help.name\"","storage": "worldtool:storage","color": "aqua","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"label.shapes.precision.description\"","storage": "worldtool:storage"}}}," ",{"nbt":"button.left.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.decrease.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/precision_decrease"}},{"score":{"name": "@s","objective": "wt.precision"}},{"nbt":"button.right.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.increase.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/precision_increase"}}," ",{"nbt":"Translation.\"button.reset.name\"","storage": "worldtool:storage","color": "dark_purple","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.reset.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/precision_reset"}}]
execute if entity @s[tag=wt.setting.orientation.down] run tellraw @s ["",{"nbt":"Translation.\"label.shapes.orientation.name\"","storage": "worldtool:storage","color": "yellow","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"label.shapes.orientation.description\"","storage": "worldtool:storage"}}},{"nbt":"button.left.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.left.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/orientation_left"}},{"nbt":"Translation.\"orientation.down\"","storage": "worldtool:storage"},{"nbt":"button.right.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.right.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/orientation_right"}}]
execute if entity @s[tag=wt.setting.orientation.up] run tellraw @s ["",{"nbt":"Translation.\"label.shapes.orientation.name\"","storage": "worldtool:storage","color": "yellow","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"label.shapes.orientation.description\"","storage": "worldtool:storage"}}},{"nbt":"button.left.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.left.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/orientation_left"}},{"nbt":"Translation.\"orientation.up\"","storage": "worldtool:storage"},{"nbt":"button.right.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.right.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/orientation_right"}}]
execute if entity @s[tag=wt.setting.orientation.south] run tellraw @s ["",{"nbt":"Translation.\"label.shapes.orientation.name\"","storage": "worldtool:storage","color": "yellow","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"label.shapes.orientation.description\"","storage": "worldtool:storage"}}},{"nbt":"button.left.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.left.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/orientation_left"}},{"nbt":"Translation.\"orientation.south\"","storage": "worldtool:storage"},{"nbt":"button.right.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.right.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/orientation_right"}}]
execute if entity @s[tag=wt.setting.orientation.north] run tellraw @s ["",{"nbt":"Translation.\"label.shapes.orientation.name\"","storage": "worldtool:storage","color": "yellow","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"label.shapes.orientation.description\"","storage": "worldtool:storage"}}},{"nbt":"button.left.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.left.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/orientation_left"}},{"nbt":"Translation.\"orientation.north\"","storage": "worldtool:storage"},{"nbt":"button.right.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.right.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/orientation_right"}}]
execute if entity @s[tag=wt.setting.orientation.west] run tellraw @s ["",{"nbt":"Translation.\"label.shapes.orientation.name\"","storage": "worldtool:storage","color": "yellow","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"label.shapes.orientation.description\"","storage": "worldtool:storage"}}},{"nbt":"button.left.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.left.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/orientation_left"}},{"nbt":"Translation.\"orientation.west\"","storage": "worldtool:storage"},{"nbt":"button.right.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.right.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/orientation_right"}}]
execute if entity @s[tag=wt.setting.orientation.east] run tellraw @s ["",{"nbt":"Translation.\"label.shapes.orientation.name\"","storage": "worldtool:storage","color": "yellow","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"label.shapes.orientation.description\"","storage": "worldtool:storage"}}},{"nbt":"button.left.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.left.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/orientation_left"}},{"nbt":"Translation.\"orientation.east\"","storage": "worldtool:storage"},{"nbt":"button.right.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.right.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/orientation_right"}}]
function #worldtool:addon/ui_shapes/main/display_orientation
execute if entity @s[tag=wt.setting.degrees] run tellraw @s ["",{"nbt":"Translation.\"label.shapes.degrees.name\"","storage": "worldtool:storage","color": "gold","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"label.shapes.degrees.description\"","storage": "worldtool:storage"}}},{"nbt":"Translation.\"button.help.name\"","storage": "worldtool:storage","color": "aqua","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"label.shapes.degrees.description\"","storage": "worldtool:storage"}}}," ",{"nbt":"button.left.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.decrease.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/degrees_decrease"}},{"score":{"name": "@s","objective": "wt.degrees"}},{"nbt":"button.right.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.increase.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/degrees_increase"}}," ",{"nbt":"Translation.\"button.reset.name\"","storage": "worldtool:storage","color": "dark_purple","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.reset.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/degrees_reset"}}]
execute if entity @s[tag=wt.setting.z_rotation] run tellraw @s ["",{"nbt":"Translation.\"label.shapes.z_rot.name\"","storage": "worldtool:storage","color": "yellow","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"label.shapes.z_rot.description\"","storage": "worldtool:storage"}}},{"nbt":"button.left.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.decrease.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/x_rot_decrease"}},{"score":{"name": "@s","objective": "wt.rotX"}},{"nbt":"button.right.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.increase.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/x_rot_increase"}}," ",{"nbt":"Translation.\"button.reset.name\"","storage": "worldtool:storage","color": "dark_purple","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.reset.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/x_rot_reset"}}]
execute if entity @s[tag=wt.setting.x_rotation] run tellraw @s ["",{"nbt":"Translation.\"label.shapes.x_rot.name\"","storage": "worldtool:storage","color": "yellow","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"label.shapes.x_rot.description\"","storage": "worldtool:storage"}}},{"nbt":"button.left.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.decrease.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/x_rot_decrease"}},{"score":{"name": "@s","objective": "wt.rotX"}},{"nbt":"button.right.name","storage": "worldtool:storage","color": "light_purple","bold": true,"hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.increase.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/x_rot_increase"}}," ",{"nbt":"Translation.\"button.reset.name\"","storage": "worldtool:storage","color": "dark_purple","hoverEvent": {"action": "show_text","contents": {"nbt":"Translation.\"button.reset.description\"","storage": "worldtool:storage"}},"clickEvent": {"action": "run_command","value": "/function worldtool:ui_shapes/settings/x_rot_reset"}}]
function #worldtool:addon/ui_shapes/main/display_settings
